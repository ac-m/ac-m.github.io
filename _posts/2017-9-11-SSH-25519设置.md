---
layout: post
title: SSH 25519设置
---

## 生成CA密钥
```bash
ssh-keygen -t ed25519 -N "" -C "CA key" -f ./ca_key
```
其中  
  -t为密钥类型  
  -N为私钥保护密码  
  -C为注释  
  -f为输出私钥文件名，输出公钥文件名为私钥文件名加".pub"  


## 生成客户端用户认证密钥
```bash
ssh-keygen -t ed25519 -N "" -C "userA key" -f ./user_key
#接着，把user_key.pub复制到CA所在主机
ssh-keygen -s ca_key -I "userA certificate" ./user_key.pub
#接着，把user_key-cert.pub复制到客户端
```
第一行，生成私钥user_key、公钥user_key.pub  
第三行，用私钥ca_key签名公钥user_key.pub得到证书user_key-cert.pub  
-I指明密钥标识，当服务器认证用户证书时会记录到日志。


## 生成服务器主机认证密钥
```bash
ssh-keygen -t ed25519 -N "" -C "server host key" -f ./host_key
#接着，把host_key.pub复制到CA所在主机
ssh-keygen -s ca_key -I "server host certificate" -h ./host_key.pub
#接着，把host_key-cert.pub复制到服务器
```
第一行，生成私钥host_key、公钥host_key.pub  
第三行，用私钥ca_key签名公钥host_key.pub得到证书host_key-cert.pub，  
其中-h表示这是主机证书而非用户证书。  


